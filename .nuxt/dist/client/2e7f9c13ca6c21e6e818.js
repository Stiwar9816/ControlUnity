(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{451:function(e,t,r){"use strict";r.r(t);r(137),r(24),r(68);var n=r(25),o={layout:"home",data:function(){return{search:"",valid:!0,switch1:!0,edit:!1,name:"",cc:"",email:"",lessons:"",observation:"",status:["Activo","Inactivo"],ccRules:[function(e){return!!e||"Nombre del salon es requerido"}],nameRules:[function(e){return!!e||"Estado del implemento es requerido"},function(e){return/[a-zA-Z]+$/.test(e)||"Este campo no admite numeros"}],lessonsRules:[function(e){return!!e||"Ubicación del salon es requerido"}],emailRules:[function(e){return!!e||"Correo electronico es requerido "},function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Correo electronico no es valido, Verifiquelo nuevamente"}],statusRules:[function(e){return!!e||"Ubicación del salon es requerido"}],headers:[{text:"C.C",align:"center",value:"cc"},{text:"NOMBRE COMPLETO",align:"center",sortable:!1,value:"name"},{text:"EMAIL",align:"center",sortable:!1,value:"email"},{text:"ESTADO",align:"center",sortable:!1,value:"status"},{text:"OBSERVACIONES",align:"center",sortable:!1,value:"observation"},{text:"ACCIONES",align:"center",sortable:!1,value:"icon"}],items:[],editTeachers:{},snackbar:!1,text:"",color:""}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=sessionStorage.getItem("token"),t.next=4,axios.get("/api/teacher/?token=".concat(r));case 4:return n=t.sent,t.next=7,n.data.Teachers;case 7:e.items=t.sent,t.next=16;break;case 10:t.prev=10,t.t0=t.catch(0),e.snackbar=!0,e.color="error",e.text=t.t0.message,console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})))()},mounted:function(){this.valid=!1},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},NewTeacher:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/api/newTeacher/",{cc:e.cc,name:e.name,email:e.email,lessons:e.lessons}).then((function(t){e.salon,e.snackbar=!0,e.color="success",e.text="¡Profesor agregado con exito!"})).catch((function(t){e.snackbar=!0,e.color="error",e.text=t.message,console.log(t)}));case 2:case"end":return t.stop()}}),t)})))()},onlyTeacher:function(e){var t=this;this.edit=!0,console.log(e),axios.get("api/teacher/".concat(e)).then((function(e){t.editTeachers=e.data})).catch((function(e){t.snackbar=!0,t.color="error",t.text=e.message,console.log(e)}))},editTeacher:function(e){var t=this;axios.put("api/updateTeacher/".concat(e._id),e).then((function(e){var r=t.items.findIndex((function(t){return t._id===e.data._id}));t.items[r].cc=e.data.cc,t.items[r].name=e.data.name,t.items[r].email=e.data.email,t.items[r].lessons=e.data.lessons,t.items[r].status=e.data.status,t.edit=!1,t.snackbar=!0,t.color="success",t.text="¡Profesor Editado con exito!"}))},deleteTeacher:function(e){var t=this;confirm("Esta seguro de eliminar este profesor?")&&axios.delete("api/deleteTeacher/"+e).then((function(r){var n=t.items.findIndex((function(e){return e._id===r.data._id}));console.log("Teacher Delete: ",e),t.items.splice(n,1),t.snackbar=!0,t.color="success",t.text="¡Profesor eliminado con exito!",t.$router.go()})).catch((function(e){t.snackbar=!0,t.color="error",t.text=e.message,console.log("Unable to clear the teacher",e)}))}}},c=r(46),l=r(56),d=r.n(l),m=r(102),v=r(444),f=r(378),h=r(447),x=r(380),k=r(392),w=r(149),_=r(381),T=r(445),y=r(393),R=r(408),E=r(407),C=r(440),V=r(363),O=r(446),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",[r("v-flex",[r("v-subheader",{staticClass:"subtitle-1"},[e._v("LISTADO DE PROFESORES")]),e._v(" "),r("v-container",[r("v-switch",{attrs:{inset:"",label:"Mostrar Formulario"},model:{value:e.switch1,callback:function(t){e.switch1=t},expression:"switch1"}}),e._v(" "),e.edit?r("v-form",{directives:[{name:"show",rawName:"v-show",value:e.switch1,expression:"switch1"}],ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return e.editTeacher(e.editTeachers)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"3",md:"2"}},[r("v-text-field",{attrs:{autofocus:"",min:"0",type:"number",rules:e.ccRules,label:"Cedula de ciudadania",required:""},model:{value:e.editTeachers.cc,callback:function(t){e.$set(e.editTeachers,"cc",t)},expression:"editTeachers.cc"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"5",md:"3"}},[r("v-text-field",{attrs:{rules:e.nameRules,label:"Nombre completo",required:""},model:{value:e.editTeachers.name,callback:function(t){e.$set(e.editTeachers,"name",t)},expression:"editTeachers.name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[r("v-text-field",{attrs:{rules:e.emailRules,label:"Email",type:"email",min:"1",max:"70",required:""},model:{value:e.editTeachers.email,callback:function(t){e.$set(e.editTeachers,"email",t)},expression:"editTeachers.email"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[r("v-select",{attrs:{rules:e.statusRules,items:e.status,label:"Estado"},model:{value:e.editTeachers.status,callback:function(t){e.$set(e.editTeachers,"status",t)},expression:"editTeachers.status"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"10",md:"2"}},[r("v-textarea",{attrs:{autoGrow:"",rows:"1","row-height":"20",label:"Observación"},model:{value:e.editTeachers.observation,callback:function(t){e.$set(e.editTeachers,"observation",t)},expression:"editTeachers.observation"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{align:"center"}},[r("v-btn",{attrs:{rounded:"",color:"success black--text mr-2",type:"submit",disabled:!e.valid}},[r("v-icon",{attrs:{dark:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v("Editar\n            ")],1),e._v(" "),r("v-btn",{attrs:{rounded:"",color:"error black--text"},on:{click:function(t){e.edit=!1}}},[r("v-icon",{attrs:{dark:""}},[e._v("mdi-cancel")]),e._v("Cancelar\n            ")],1)],1)],1)],1):e._e(),e._v(" "),e.edit?e._e():r("v-form",{directives:[{name:"show",rawName:"v-show",value:e.switch1,expression:"switch1"}],ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return e.NewTeacher()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[r("v-text-field",{attrs:{autofocus:"",min:"0",type:"number",rules:e.ccRules,label:"Cedula de ciudadania",required:""},model:{value:e.cc,callback:function(t){e.cc=t},expression:"cc"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-text-field",{attrs:{rules:e.nameRules,label:"Nombre completo",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-text-field",{attrs:{rules:e.emailRules,label:"Email",type:"email",min:"1",max:"70",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-textarea",{attrs:{autoGrow:"",rows:"1","row-height":"20",label:"Observación"},model:{value:e.observation,callback:function(t){e.observation=t},expression:"observation"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{align:"center"}},[r("v-btn",{attrs:{rounded:"",color:"primary black--text",type:"submit",disabled:!e.valid}},[r("v-icon",{attrs:{dark:""}},[e._v("fa fa-plus")]),e._v("Agregar\n            ")],1)],1)],1)],1),e._v(" "),r("v-row",{attrs:{cols:"12"}},[r("v-col",{attrs:{md:"4",sm:"6"}},[r("v-text-field",{staticClass:"mb-5",attrs:{"prepend-icon":"mdi-magnify",label:"Buscar Profesor","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"items-per-page":10,"sort-by":["name"],"sort-desc":[!1],search:e.search,locale:"es"},scopedSlots:e._u([{key:"items",fn:function(){},proxy:!0},{key:"item.icon",fn:function(data){return[r("v-btn",{attrs:{icon:"","aria-label":"edit"},on:{click:function(t){return e.onlyTeacher(data.item._id)}}},[r("v-icon",{attrs:{small:"",color:"edit"}},[e._v("mdi-circle-edit-outline")])],1),e._v(" "),r("v-btn",{attrs:{icon:"","aria-label":"delete"},on:{click:function(t){return e.deleteTeacher(data.item._id)}}},[r("v-icon",{attrs:{small:"",color:"error"}},[e._v("mdi-delete")])],1)]}},{key:"no-results",fn:function(){return[r("span",{staticClass:"font-weight-regular black--text"},[e._v("No se encontraron coincidencias")])]},proxy:!0},{key:"no-data",fn:function(){return[r("span",{staticClass:"font-weight-regular black--text"},[e._v("No hay información registrada")])]},proxy:!0}])}),e._v(" "),r("v-snackbar",{attrs:{color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.text)+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:m.a,VCol:v.a,VContainer:f.a,VDataTable:h.a,VFlex:x.a,VForm:k.a,VIcon:w.a,VLayout:_.a,VRow:T.a,VSelect:y.a,VSnackbar:R.a,VSubheader:E.a,VSwitch:C.a,VTextField:V.a,VTextarea:O.a})}}]);