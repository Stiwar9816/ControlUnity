(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{453:function(e,t,o){"use strict";o.r(t);o(137),o(24),o(68);var n=o(25),r=o(1),c={layout:"home",data:function(){var e;return e={loading:!1,edit:!1,switch1:!0,search:"",valid:!0},Object(r.a)(e,"edit",!1),Object(r.a)(e,"name",""),Object(r.a)(e,"location",""),Object(r.a)(e,"capacity",""),Object(r.a)(e,"description",""),Object(r.a)(e,"salonRules",[function(e){return!!e||"Nombre del salon es requerido"}]),Object(r.a)(e,"capacityRules",[function(e){return!!e||"Capacidad del salon es requerida"}]),Object(r.a)(e,"locationRules",[function(e){return!!e||"Ubicación del salon es requerido"}]),Object(r.a)(e,"descriptionRules",[function(e){return!!e||"Descripción del salon es requerida"}]),Object(r.a)(e,"headers",[{text:"NOMBRE SALON",align:"center",value:"name"},{text:"UBICACIÓN",align:"center",sortable:!1,value:"location"},{text:"CAPACIDAD",align:"center",sortable:!1,value:"capacity"},{text:"DESCRIPCIÓN",align:"center",sortable:!1,value:"description"},{text:"ACCIONES",align:"center",sortable:!1,value:"icon"}]),Object(r.a)(e,"items",[]),Object(r.a)(e,"editRooms",{}),Object(r.a)(e,"snackbar",!1),Object(r.a)(e,"text",""),Object(r.a)(e,"color",""),e},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.get("/api/room");case 3:return o=t.sent,t.next=6,o.data.Rooms;case 6:e.items=t.sent,t.next=15;break;case 9:t.prev=9,t.t0=t.catch(0),e.snackbar=!0,e.color="error",e.text=t.t0.message,console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,9]])})))()},mounted:function(){this.valid=!1},methods:{validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},NewRoom:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/api/newRoom/",{name:e.name,location:e.location,capacity:e.capacity,description:e.description}).then((function(t){e.salon,e.snackbar=!0,e.color="success",console.log({res:t}),e.text="¡Salon agregado con exito!"})).catch((function(t){e.snackbar=!0,e.color="error",e.text="¡Elemento ya existente!",console.log({e:t})}));case 2:case"end":return t.stop()}}),t)})))()},onlyRoom:function(e){var t=this;this.edit=!0,console.log(e),axios.get("api/room/".concat(e)).then((function(e){t.editRooms=e.data,t.$refs.name.focus()})).catch((function(e){t.snackbar=!0,t.color="error",t.text=e.message,console.log(e)}))},editRoom:function(e){var t=this;axios.put("api/updateRoom/".concat(e._id),e).then((function(e){var o=t.items.findIndex((function(t){return t._id===e.data._id}));t.items[o].name=e.data.name,t.items[o].location=e.data.location,t.items[o].capacity=e.data.capacity,t.items[o].description=e.data.description,t.snackbar=!0,t.color="success",t.text="¡Salon Editado con exito!",t.edit=!1}))},deleteRoom:function(e){var t=this;confirm("Esta seguro de eliminar este salon?")&&axios.delete("api/deleteRoom/"+e).then((function(o){var n=t.items.findIndex((function(e){return e._id===o.data._id}));console.log("Room Delete: ",e),t.items.splice(n,1),t.snackbar=!0,t.color="success",t.text="¡Salon eliminado con exito!",t.$router.go()})).catch((function(e){t.snackbar=!0,t.color="error",t.text=e.response.data.message,console.log("Unable to clear the room",{e:e})}))}}},l=o(46),d=o(56),m=o.n(d),v=o(102),f=o(444),x=o(378),h=o(447),k=o(380),R=o(392),w=o(149),_=o(381),y=o(445),O=o(408),C=o(407),j=o(440),S=o(363),N=o(446),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-layout",[o("v-flex",[o("v-subheader",{staticClass:"subtitle-1"},[e._v("SALONES REGISTRADOS")]),e._v(" "),o("v-container",[o("v-switch",{attrs:{inset:"",label:"Mostrar Formulario"},model:{value:e.switch1,callback:function(t){e.switch1=t},expression:"switch1"}}),e._v(" "),e.edit?o("v-form",{directives:[{name:"show",rawName:"v-show",value:e.switch1,expression:"switch1"}],ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return e.editRoom(e.editRooms)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-row",[o("v-col",{attrs:{cols:"12",sm:"2",md:"3"}},[o("v-text-field",{ref:"name",attrs:{rules:e.salonRules,label:"Nombre Salon",required:""},model:{value:e.editRooms.name,callback:function(t){e.$set(e.editRooms,"name",t)},expression:"editRooms.name"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[o("v-text-field",{attrs:{rules:e.locationRules,label:"Ubicación",required:""},model:{value:e.editRooms.location,callback:function(t){e.$set(e.editRooms,"location",t)},expression:"editRooms.location"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[o("v-text-field",{attrs:{rules:e.capacityRules,label:"Capcidad",type:"number",min:"0",maxlength:"70",required:"",id:"capacity"},model:{value:e.editRooms.capacity,callback:function(t){e.$set(e.editRooms,"capacity",t)},expression:"editRooms.capacity"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"6",md:"5"}},[o("v-textarea",{attrs:{rules:e.descriptionRules,autoGrow:"",required:"",rows:"1","row-height":"20",label:"Descripción"},model:{value:e.editRooms.description,callback:function(t){e.$set(e.editRooms,"description",t)},expression:"editRooms.description"}})],1)],1),e._v(" "),o("v-row",[o("v-col",{attrs:{align:"center"}},[o("v-btn",{attrs:{rounded:"",color:"success black--text mr-2",type:"submit",disabled:!e.valid}},[o("v-icon",{attrs:{dark:""}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v("Editar\n            ")],1),e._v(" "),o("v-btn",{attrs:{rounded:"",color:"error black--text"},on:{click:function(t){e.edit=!1}}},[o("v-icon",{attrs:{dark:""}},[e._v("mdi-cancel")]),e._v("Cancelar\n            ")],1)],1)],1)],1):e._e(),e._v(" "),e.edit?e._e():o("v-form",{directives:[{name:"show",rawName:"v-show",value:e.switch1,expression:"switch1"}],ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.NewRoom()}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-row",[o("v-col",{attrs:{cols:"12",sm:"3",md:"3"}},[o("v-text-field",{attrs:{autofocus:"",rules:e.salonRules,label:"Nombre Salon",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[o("v-text-field",{attrs:{rules:e.locationRules,label:"Ubicación",required:""},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"2",md:"2"}},[o("v-text-field",{attrs:{rules:e.capacityRules,label:"Capacidad",type:"number",min:"1",max:"70",required:""},model:{value:e.capacity,callback:function(t){e.capacity=t},expression:"capacity"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12",sm:"5",md:"5"}},[o("v-textarea",{attrs:{rules:e.descriptionRules,autoGrow:"",rows:"1","row-height":"20",label:"Descripción"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1),e._v(" "),o("v-row",[o("v-col",{attrs:{align:"center"}},[o("v-btn",{attrs:{rounded:"",color:"primary black--text",type:"submit",disabled:!e.valid}},[o("v-icon",{attrs:{dark:""}},[e._v("fa fa-plus")]),e._v("Agregar\n            ")],1)],1)],1)],1),e._v(" "),o("v-row",{attrs:{cols:"12"}},[o("v-col",{attrs:{md:"4",sm:"6"}},[o("v-text-field",{staticClass:"mb-5",attrs:{"prepend-icon":"mdi-magnify",label:"Buscar Salon","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1),e._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,"items-per-page":10,"sort-by":["name"],"sort-desc":[!1],search:e.search},scopedSlots:e._u([{key:"items",fn:function(){},proxy:!0},{key:"item.icon",fn:function(data){return[o("v-btn",{attrs:{icon:"","aria-label":"edit"},on:{click:function(t){return e.onlyRoom(data.item._id)}}},[o("v-icon",{attrs:{small:"",color:"edit"}},[e._v("mdi-circle-edit-outline")])],1),e._v(" "),o("v-btn",{attrs:{icon:"","aria-label":"delete"},on:{click:function(t){return e.deleteRoom(data.item._id)}}},[o("v-icon",{attrs:{small:"",color:"error"}},[e._v("mdi-delete")])],1)]}},{key:"no-results",fn:function(){return[o("span",{staticClass:"font-weight-regular black--text"},[e._v("No se encontraron coincidencias")])]},proxy:!0},{key:"no-data",fn:function(){return[o("span",{staticClass:"font-weight-regular black--text"},[e._v("No hay información registrada")])]},proxy:!0}])}),e._v(" "),o("v-snackbar",{attrs:{color:e.color},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n        "+e._s(e.text)+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{VBtn:v.a,VCol:f.a,VContainer:x.a,VDataTable:h.a,VFlex:k.a,VForm:R.a,VIcon:w.a,VLayout:_.a,VRow:y.a,VSnackbar:O.a,VSubheader:C.a,VSwitch:j.a,VTextField:S.a,VTextarea:N.a})}}]);